
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Diving into the StoryTeller trunk, Part 7: Screens - Dude, where's my Kaizen?</title>
  <meta name="author" content="BjÃ¶rn Rochel">

  
  <meta name="description" content="In the previous post I gave a short overview over the players that areinvolved in the so called Screen Activation Lifecycle. Today I wouldlike to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.bjoernrochel.de/2009/08/14/diving-into-the-storyteller-trunk-part-7-screens/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Dude, where's my Kaizen?" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>

<body   >
  <header role="banner"><div id="logo">
</div>
<hgroup>
  <h1><a href="/">Dude, where's my Kaizen?</a></h1>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.bjoernrochel.de" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Diving Into the StoryTeller Trunk, Part 7: Screens</h1>
    
    
      <p class="meta">
        





  



<time datetime="2009-08-14T17:04:15+02:00" pubdate  data-updated="true" >Aug 14<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In the previous post I gave a short overview over the players that are
involved in the so called Screen Activation Lifecycle. Today I would
like to take a closer look at, guess what, the Screen.</p>

<p>For me personally, the design &#8216;around&#8217; a Screen is one of the crutial
elements for success in developing a composite UI layer. Why do I think
so?</p>

<p>Mostly because it&#8217;s one of the central points which connects the UI
infrastructure with all the rest of the application, the actual
application code. It&#8217;s THE INTERFACE that fills you&#8217;re framework /
infrastructure with life. If you fail here you probably feel the result
throughout the complete application. Day to day work happens around that
interface and since the UI seems to be one of those places in an
application that is very volatile and changes a lot, a Screen design
with principles like DRY and OCP in mind will make your life as an
application developer much easier.</p>

<p>So what are the basic responsibilities of a Screen?</p>

<ul>
<li>First of all it provides content. While a composite UI&#8217;s shell
provides the hull of the application, the Screen provides the UI to
fulfill a business requirement. I think it&#8217;s comparable to the
relationship between an Asp.Net Masterpage and the aspx pages
displayed in its content placeholder (Disclaimer: I&#8217;m no Asp.net
expert so feel free to correct).</li>
<li>Controlling Screen Activation. Since the UI infrastructure can&#8217;t
possibly now what has to happen when a Screen is activated, it
delegates the responsibility to the Screen itself. A practical
example of the Tell-Don&#8217;t-Ask-principle. Interaction with the
Command infrastructure mostly happens here.</li>
<li>Controlling Screen Deactivation / Closing. I&#8217;ve seen this in several
applications now. A Screen with changed data can only be left /
closed when a) changes have been persisted or b) the user votes to
discard the changes. Like in point 2. the UI infrastructure can&#8217;t
possibly know when that&#8217;s the case, so it&#8217;s delegated.</li>
</ul>


<p>With those 3 points in mind, let&#8217;s take a look at the Screen interface
in StoryTeller.</p>

<figure class='code'><figcaption><span>The Screen interface</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">interface</span> <span class="n">IScreen</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">object</span> <span class="n">View</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">void</span> <span class="nf">Activate</span><span class="p">(</span><span class="n">IScreeObjectRegistry</span> <span class="n">screenObjects</span><span class="p">);</span>
</span><span class='line'>    <span class="kt">bool</span> <span class="nf">CanClose</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pretty straight forward, isn&#8217;t it?. Next question, who is
actually implementing the interface? And the answer is surprisingly: It
depends! This interface can be implemented for instance by <code>Passive View</code>
- or <code>Supervising Controller</code> - style Presenters. It can be implemented by
ViewModels in Model-View-View-Model implementations. It can even be
implemented by UserControls (though StoryTeller uses this only for very
simplistic screens). It&#8217;s a very pragmatic solution giving a lot of
choice to an application developer on how to interact with the UI
infrastructure.</p>

<p>I think that&#8217;s a good choice. We, as a community, shouldn&#8217;t be dogmatic
about MVVM vs. MVP, or the whole No-Code-Behind-debate. Consistency is
import but, sticking to a pattern not suited for a particular screen
(for instance using Passive View for a screen with a lot of fields) can
hurt much more than the (pattern) consistency would justify. Mh, that
was a little bit off-topic, wasn&#8217;t it?</p>

<p>Most of the Screens in StoryTeller are classical Model View Presenter
implementations getting their view injected in the constructor.</p>

<figure class='code'><figcaption><span>An screen straight from StoryTeller</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'>   <span class="k">public</span> <span class="k">class</span> <span class="nc">SuitePresenter</span> <span class="p">:</span> <span class="n">IListener</span><span class="p">&lt;</span><span class="n">TestIconChanged</span><span class="p">&gt;,</span> <span class="n">ISuitePresenter</span><span class="p">,</span> <span class="n">IListener</span><span class="p">&lt;</span><span class="n">TestAdded</span><span class="p">&gt;</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>       <span class="k">private</span> <span class="k">readonly</span> <span class="n">Cache</span> <span class="n">_drivers</span><span class="p">;</span>
</span><span class='line'>       <span class="k">private</span> <span class="k">readonly</span> <span class="n">ITestExplorer</span> <span class="n">_explorer</span><span class="p">;</span>
</span><span class='line'>       <span class="k">private</span> <span class="k">readonly</span> <span class="n">ITestService</span> <span class="n">_service</span><span class="p">;</span>
</span><span class='line'>       <span class="k">private</span> <span class="k">readonly</span> <span class="n">Suite</span> <span class="n">_suite</span><span class="p">;</span>
</span><span class='line'>       <span class="k">private</span> <span class="k">readonly</span> <span class="n">ISuiteView</span> <span class="n">_view</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>       <span class="k">public</span> <span class="nf">SuitePresenter</span><span class="p">(</span><span class="n">Suite</span> <span class="n">suite</span><span class="p">,</span> <span class="n">ISuiteView</span> <span class="n">view</span><span class="p">,</span> <span class="n">ITestExplorer</span> <span class="n">explorer</span><span class="p">,</span> <span class="n">ITestService</span> <span class="n">service</span><span class="p">)</span>
</span><span class='line'>       <span class="p">{</span>
</span><span class='line'>           <span class="n">_suite</span> <span class="p">=</span> <span class="n">suite</span><span class="p">;</span>
</span><span class='line'>           <span class="n">_view</span> <span class="p">=</span> <span class="n">view</span><span class="p">;</span>
</span><span class='line'>           <span class="n">_explorer</span> <span class="p">=</span> <span class="n">explorer</span><span class="p">;</span>
</span><span class='line'>           <span class="n">_service</span> <span class="p">=</span> <span class="n">service</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>           <span class="n">_view</span><span class="p">.</span><span class="n">Presenter</span> <span class="p">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>           <span class="n">_drivers</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Cache</span><span class="p">&lt;</span><span class="n">Test</span><span class="p">,</span> <span class="n">ITestLineDriver</span><span class="p">&gt;(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="n">_view</span><span class="p">.</span><span class="n">AddTest</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">queueTest</span><span class="p">));</span>
</span><span class='line'>       <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">..........</span>
</span><span class='line'>   <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The structural aspect of the screens isn&#8217;t
that interesting to me. Standard MVP stuff. The activation however (in
particular the usage of <code>IScreenObjectRegistry</code>) looks really interesting.
Take a look for yourself:</p>

<figure class='code'><figcaption><span>A dsl for controlling commands</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">Activate</span><span class="p">(</span><span class="n">IScreenObjectRegistry</span> <span class="n">screenObjects</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">screenObjects</span>
</span><span class='line'>       <span class="p">.</span><span class="n">Action</span><span class="p">(</span><span class="s">&quot;Run&quot;</span><span class="p">)</span>
</span><span class='line'>       <span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">ModifierKeys</span><span class="p">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">Key</span><span class="p">.</span><span class="n">D1</span><span class="p">)</span>
</span><span class='line'>       <span class="p">.</span><span class="n">To</span><span class="p">(</span><span class="n">_presenter</span><span class="p">.</span><span class="n">RunCommand</span><span class="p">).</span><span class="n">Icon</span> <span class="p">=</span> <span class="n">Icon</span><span class="p">.</span><span class="n">Run</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>IScreenObjectRegistry</code> will be inspected in a future post. The next post
though, will take a closer look at the <code>ScreenCollection</code>. So, if you&#8217;re
eager to learn more about the diamonds and jewels Jeremy has created in
StoryTellers trunk (like I am) rejoin me for the next post when it&#8217;s
time to go diving again &#8230;</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">BjRo</span></span>

      





  



<time datetime="2009-08-14T17:04:15+02:00" pubdate  data-updated="true" >Aug 14<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/storyteller/'>StoryTeller</a>, <a class='category' href='/blog/categories/dotnet/'>dotnet</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.bjoernrochel.de/2009/08/14/diving-into-the-storyteller-trunk-part-7-screens/" data-via="bjoernrochel" data-counturl="http://www.bjoernrochel.de/2009/08/14/diving-into-the-storyteller-trunk-part-7-screens/" >Tweet</a>
  
  
</div>

    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
	<h1>About me</h1>
  <p><br/><img src="/images/bjro-eyes.jpg" alt="portrait" /></p>
	<p>
  My name is <strong>BjÃ¶rn Rochel</strong>.  I'm a 32 year old geek, who's crazy about software development, living in Cologne and
  currently working for <a href="http://www.intercomponentware.com">ICW</a> as a Developer / Architect.
	</p>
	<ul id="badges">
    <li><a id="xing" href="http://www.xing.com/profile/Bjoern_Rochel"><span>XING</span></a></li>
    <li><a id="github" href="http://www.github.com/BjRo"><span>Github</span></a></li>
    <li><a id="twitter" href="http://www.twitter.com/bjoernrochel"><span>Twitter</span></a></li>
    <li><a id="rss" href="/atom.xml"><span>Rss</span></a></li>
	</ul>
</section>

<section>
  <h1>Categories</h1>
  <ul id='categories'>
<li><a href='http://www.bjoernrochel.de/blog/categories/Conferences/'>Conferences (8)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/FSharp/'>FSharp (3)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/Katas/'>Katas (2)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/StoryTeller/'>StoryTeller (14)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/StructureMap/'>StructureMap (9)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/Testing/'>Testing (20)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/Uncategorized/'>Uncategorized (8)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/dotnet/'>dotnet (65)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/ruby/'>ruby (3)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/sw-design/'>sw-design (13)</a></li>
<li><a href='http://www.bjoernrochel.de/blog/categories/xUnitBDDExtensions/'>xUnitBDDExtensions (15)</a></li>
</ul>

</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("bjoernrochel", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/bjoernrochel" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @bjoernrochel</a>
  
</section>

<section>
<h1>Disclaimer</h1>
<p>
The opinions expressed herein are my own personal opinions and do not necessarily represent the opinion of any other organization or person, including (but not limited to) my fellow employees, my employer, its clients or their agents. 
</p>
<p>
 Copyright &copy; 2011 - BjÃ¶rn Rochel
</p>
<section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - BjÃ¶rn Rochel -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'bjro';
      
        

				//var disqus_developer = 1;
				var disqus_identifier = 'http://www.bjoernrochel.de/2009/08/14/diving-into-the-storyteller-trunk-part-7-screens/';
				var disqus_url = 'http://www.bjoernrochel.de/2009/08/14/diving-into-the-storyteller-trunk-part-7-screens/';
        var disqus_script = 'embed.js';
      

    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







</body>
</html>
